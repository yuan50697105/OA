
<!-- saved from url=(0049)http://177.77.79.206:8080/oa//work/getWorkMessage -->
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <!-- 公共的页面头部引入页面 -->
    <link rel="shortcut icon" href="images/logo.ico">
    <link rel="Bookmark" href="images/logo.ico">


    <meta http-equiv="Cache-Control" content="no-store">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <meta http-equiv="Cache" content="no-cache">

    <link rel="stylesheet" type="text/css" href="css/mainbase.css">
    <link rel="stylesheet" type="text/css" href="css/button.css">
    <link href="css/jquery-ui-1.8.14.custom.css" rel="stylesheet" type="text/css">

    <script type="text/javascript" src="js/jquery-1.11.0.js"></script>
    <script type="text/javascript" src="js/jquery-migrate-1.2.1.js"></script>
    <script type="text/javascript" src="js/jquery.form.js"></script>
    <script type="text/javascript" src="js/jquery.validate.min.js"></script>

    <script type="text/javascript" src="js/jquery-ui.js"></script>
    <script type="text/javascript" src="js/jquery-ui.datepicker-zh-CN.js"></script>
    <script type="text/javascript" src="js/public.js"></script>
    <script type="text/javascript" src="js/TimeFormat.js"></script>

    <script src="js/dialog-min.js"></script>
    <link href="css/ui-dialog.css" rel="stylesheet">
</head>
<body>
<div class="pTitle">
    <p>工作计划</p>
</div>
<form id="get_work" action="" method="post">
    <div class="search_box">标题:<input name="workName" value="" type="text" class="searchinput input_text">
        <input type="submit" class="search_btn input_button" value="搜 索">
    </div>
    <div id="get_work_list">
        <link href="css/list_style.css" rel="stylesheet" type="text/css">
        <script>
            $(function () {
                $("#checkAll").click(function () {
                    //设置复选框全选或反选
                    $("input[type='checkbox'][id^='box_']").attr("checked", this.checked);
                });

                $("#deleteBtn").click(function () {
                    //获取所有选中的复选框
                    var boxs = $("input[id^='box_']:checked");
                    if (boxs.length == 0) {
                        var d = dialog({
                            title: '温馨提示',
                            content: '请选择需要删除的计划!',
                        });
                        d.show();
                        setTimeout(function () {
                            d.close().remove();
                        }, 1000);
                    } else {
                        var d = dialog({
                            title: '温馨提示',
                            content: '您确定要删除所选的工作计划?',
                            okValue: '确定',
                            ok: function () {
                                //删除操作
                                delWork();
                            },
                            cancelValue: '取消',
                            cancel: function () {
                                d.close().remove();
                            }
                        });
                        d.show();
                    }
                });
            });

            function delWork() {
                var boxs = $("input[id^='box_']:checked");
                var ids = boxs.map(function (i, item) {
                    return item.value;
                });

                var params = {"workIds": ids.get().join('-')};
                var url = "/oa/work/ajaxDelWork";
                $.post(url, params, function (flag) {
                    if (flag) {
                        var d = dialog({
                            title: '温馨提示',
                            content: '删除成功',
                        });
                        d.show();
                        setTimeout(function () {
                            d.close().remove();
                            //刷新当前界面
                            window.location.href = window.location.href;
                        }, 1000);
                    }
                }, "json");
            }
        </script>

        <div class="rightinfo">

            <div class="tools">

                <ul class="toolbar">
                    <li class="click">
                        <a href="javascript:void(0)"
                           onClick="openWindow(&;#39;/oa/;work/toAddWork&;#39;,&#39;850&;#39;,&#39;500&;#39;)">
        <span>
        <img src="images/t01.png">
        </span>添加</a>
                    </li>
                    <li>
                        <a href="javascript:void(0);" id="deleteBtn">
        <span>
        <img src="images/t03.png">
        </span>删除</a>
                    </li>
                </ul>

            </div>

            <table class="tablelist">
                <thead>
                <tr>
                    <th><input name="checkAll" id="checkAll" type="checkbox"></th>
                    <th style="width:40px;">编号</th>
                    <th>工作计划标题</th>
                    <th>工作计划内容</th>
                    <th>计划开始时间</th>
                    <th>计划结束时间</th>
                    <th>操作</th>
                </tr>
                </thead>

                <tbody id="tbody_20">
                <tr>
                    <td style="width:25px;">
                        <input id="box_20" name="box_20" type="checkbox" value="20">
                    </td>
                    <td>20</td>
                    <td style="width:150px;">公司年度工作计划</td>
                    <td style="width:250px;"><p>2015年年度工作指导思想，具体如....</p></td>
                    <td style="width:100px;">2015-05-09</td>
                    <td style="width:100px;">2015-05-22</td>
                    <td>
                        <a href="#" class="tablelink">查看</a>&nbsp;|&nbsp;
                        <a href="javascript:void(0);" id="deleteBtn2" class="tablelink">删除</a>
                    </td>
                </tr>

                <tr>
                    <td style="width:25px;">
                        <input id="box_20" name="box_20" type="checkbox" value="20">
                    </td>
                    <td>20</td>
                    <td style="width:150px;">部门年度工作计划</td>
                    <td style="width:250px;"><p>部门定位及发展策略目标.....</p></td>
                    <td style="width:100px;">2016-05-09</td>
                    <td style="width:100px;">2016-05-22</td>
                    <td>
                        <a href="#" class="tablelink">查看</a>&nbsp;|&nbsp;
                        <a href="javascript:void(0);" id="deleteBtn2" class="tablelink">删除</a>
                    </td>
                </tr>

                </tbody>
            </table>
        </div>
    </div>
</form>

</body>
</html>